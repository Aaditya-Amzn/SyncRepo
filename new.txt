testing the entire sync flow
